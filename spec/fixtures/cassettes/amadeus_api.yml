---
http_interactions:
- request:
    method: post
    uri: https://test.api.amadeus.com/v1/security/oauth2/token
    body:
      encoding: UTF-8
      string: grant_type=client_credentials&client_id=<AMADEUS_KEY>&client_secret=<AMADEUS_SECRET>
    headers:
      Accept:
      - application/x-www-form-urlencoded
      Connection:
      - close
      Content-Type:
      - application/x-www-form-urlencoded
      Host:
      - test.api.amadeus.com
      User-Agent:
      - http.rb/5.1.0
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Sat, 22 Oct 2022 06:30:11 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '415'
      Connection:
      - close
      Host:
      - test.api.amadeus.com
      X-Forwarded-For:
      - 140.114.233.105
      X-Forwarded-Port:
      - '443'
      X-Forwarded-Proto:
      - https
      Accept:
      - application/x-www-form-urlencoded
      User-Agent:
      - http.rb/5.1.0
      Ama-Gateway-Request-Id:
      - rrt-052e4ae756f269eb4-c-eu-4515-515776639-1
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Allow-Headers:
      - origin, x-requested-with, accept, Content-Type
      Access-Control-Max-Age:
      - '3628800'
      Access-Control-Allow-Methods:
      - POST, GET, OPTIONS
      Server:
      - Amadeus
    body:
      encoding: UTF-8
      string: "\n        {\n            \"type\": \"amadeusOAuth2Token\",\n            \"username\":
        \"xjiang@gapp.nthu.edu.tw\",\n            \"application_name\": \"SOA_Project\",\n
        \           \"client_id\": \"<AMADEUS_KEY>\",\n            \"token_type\":
        \"Bearer\",\n            \"access_token\": \"mAzGRuGTuAyo3SjJl84ry1wyziSP\",\n
        \           \"expires_in\": 1799,\n            \"state\": \"approved\",\n
        \           \"scope\": \"\"\n        }\n        "
  recorded_at: Sat, 22 Oct 2022 06:30:10 GMT
- request:
    method: post
    uri: https://test.api.amadeus.com/v2/shopping/flight-offers
    body:
      encoding: UTF-8
      string: '{"currencyCode":"USD","originDestinations":[{"id":1,"originLocationCode":"TPE","destinationLocationCode":"MAD","departureDateTimeRange":{"date":"2022-11-01","time":"10:00:00"}},{"id":2,"originLocationCode":"MAD","destinationLocationCode":"TPE","departureDateTimeRange":{"date":"2022-11-05","time":"17:00:00"}}],"travelers":[{"id":"1","travelerType":"ADULT"}],"sources":["GDS"]}'
    headers:
      Accept:
      - application/vnd.amadeus+json
      Authorization:
      - Bearer mAzGRuGTuAyo3SjJl84ry1wyziSP
      Connection:
      - close
      Content-Type:
      - application/json; charset=UTF-8
      Host:
      - test.api.amadeus.com
      User-Agent:
      - http.rb/5.1.0
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Sat, 22 Oct 2022 06:30:15 GMT
      Content-Type:
      - application/vnd.amadeus+json
      Content-Length:
      - '5291'
      Connection:
      - close
      Ama-Internal-Message-Version:
      - '14.1'
      Ama-Request-Id:
      - 0001CDARRK562D
      Ama-Gateway-Request-Id:
      - rrt-052e4ae756f269eb4-c-eu-4516-515776855-1
      Access-Control-Allow-Headers:
      - origin, x-requested-with, accept, Content-Type, Authorization
      Access-Control-Max-Age:
      - '3628800'
      Access-Control-Allow-Methods:
      - "*"
      Server:
      - Amadeus
      Access-Control-Allow-Origin:
      - "*"
    body:
      encoding: ASCII-8BIT
      string: '{"meta":{"count":2},"data":[{"type":"flight-offer","id":"1","source":"GDS","instantTicketingRequired":false,"nonHomogeneous":false,"oneWay":false,"lastTicketingDate":"2022-10-25","numberOfBookableSeats":9,"itineraries":[{"duration":"PT19H15M","segments":[{"departure":{"iataCode":"TPE","terminal":"2","at":"2022-11-01T22:25:00"},"arrival":{"iataCode":"IST","at":"2022-11-02T06:05:00"},"carrierCode":"TK","number":"25","aircraft":{"code":"77W"},"operating":{"carrierCode":"TK"},"duration":"PT12H40M","id":"3","numberOfStops":0,"blacklistedInEU":false},{"departure":{"iataCode":"IST","at":"2022-11-02T08:10:00"},"arrival":{"iataCode":"MAD","terminal":"1","at":"2022-11-02T10:40:00"},"carrierCode":"TK","number":"1857","aircraft":{"code":"333"},"operating":{"carrierCode":"TK"},"duration":"PT4H30M","id":"4","numberOfStops":0,"blacklistedInEU":false}]},{"duration":"PT16H35M","segments":[{"departure":{"iataCode":"MAD","terminal":"1","at":"2022-11-05T18:00:00"},"arrival":{"iataCode":"IST","at":"2022-11-06T00:10:00"},"carrierCode":"TK","number":"1860","aircraft":{"code":"321"},"operating":{"carrierCode":"TK"},"duration":"PT4H10M","id":"5","numberOfStops":0,"blacklistedInEU":false},{"departure":{"iataCode":"IST","at":"2022-11-06T02:10:00"},"arrival":{"iataCode":"TPE","terminal":"2","at":"2022-11-06T17:35:00"},"carrierCode":"TK","number":"24","aircraft":{"code":"77W"},"operating":{"carrierCode":"TK"},"duration":"PT10H25M","id":"6","numberOfStops":0,"blacklistedInEU":false}]}],"price":{"currency":"USD","total":"1798.00","base":"1273.00","fees":[{"amount":"0.00","type":"SUPPLIER"},{"amount":"0.00","type":"TICKETING"}],"grandTotal":"1798.00"},"pricingOptions":{"fareType":["PUBLISHED"],"includedCheckedBagsOnly":true},"validatingAirlineCodes":["TK"],"travelerPricings":[{"travelerId":"1","fareOption":"STANDARD","travelerType":"ADULT","price":{"currency":"USD","total":"1798.00","base":"1273.00"},"fareDetailsBySegment":[{"segmentId":"3","cabin":"ECONOMY","fareBasis":"OLF2XPX","brandedFare":"RS","class":"O","includedCheckedBags":{"weight":30,"weightUnit":"KG"}},{"segmentId":"4","cabin":"ECONOMY","fareBasis":"OLF2XPX","brandedFare":"RS","class":"O","includedCheckedBags":{"weight":30,"weightUnit":"KG"}},{"segmentId":"5","cabin":"ECONOMY","fareBasis":"HLF2XEX","brandedFare":"FX","class":"H","includedCheckedBags":{"weight":30,"weightUnit":"KG"}},{"segmentId":"6","cabin":"ECONOMY","fareBasis":"HLF2XEX","brandedFare":"FX","class":"H","includedCheckedBags":{"weight":30,"weightUnit":"KG"}}]}]},{"type":"flight-offer","id":"2","source":"GDS","instantTicketingRequired":false,"nonHomogeneous":false,"oneWay":false,"lastTicketingDate":"2022-11-01","numberOfBookableSeats":9,"itineraries":[{"duration":"PT25H5M","segments":[{"departure":{"iataCode":"TPE","terminal":"2","at":"2022-11-01T22:25:00"},"arrival":{"iataCode":"IST","at":"2022-11-02T06:05:00"},"carrierCode":"TK","number":"25","aircraft":{"code":"77W"},"operating":{"carrierCode":"TK"},"duration":"PT12H40M","id":"1","numberOfStops":0,"blacklistedInEU":false},{"departure":{"iataCode":"IST","at":"2022-11-02T14:10:00"},"arrival":{"iataCode":"MAD","terminal":"1","at":"2022-11-02T16:30:00"},"carrierCode":"TK","number":"1859","aircraft":{"code":"321"},"operating":{"carrierCode":"TK"},"duration":"PT4H20M","id":"2","numberOfStops":0,"blacklistedInEU":false}]},{"duration":"PT16H35M","segments":[{"departure":{"iataCode":"MAD","terminal":"1","at":"2022-11-05T18:00:00"},"arrival":{"iataCode":"IST","at":"2022-11-06T00:10:00"},"carrierCode":"TK","number":"1860","aircraft":{"code":"321"},"operating":{"carrierCode":"TK"},"duration":"PT4H10M","id":"5","numberOfStops":0,"blacklistedInEU":false},{"departure":{"iataCode":"IST","at":"2022-11-06T02:10:00"},"arrival":{"iataCode":"TPE","terminal":"2","at":"2022-11-06T17:35:00"},"carrierCode":"TK","number":"24","aircraft":{"code":"77W"},"operating":{"carrierCode":"TK"},"duration":"PT10H25M","id":"6","numberOfStops":0,"blacklistedInEU":false}]}],"price":{"currency":"USD","total":"1996.00","base":"1471.00","fees":[{"amount":"0.00","type":"SUPPLIER"},{"amount":"0.00","type":"TICKETING"}],"grandTotal":"1996.00"},"pricingOptions":{"fareType":["PUBLISHED"],"includedCheckedBagsOnly":true},"validatingAirlineCodes":["TK"],"travelerPricings":[{"travelerId":"1","fareOption":"STANDARD","travelerType":"ADULT","price":{"currency":"USD","total":"1996.00","base":"1471.00"},"fareDetailsBySegment":[{"segmentId":"1","cabin":"ECONOMY","fareBasis":"HLF2XEX","brandedFare":"FX","class":"H","includedCheckedBags":{"weight":30,"weightUnit":"KG"}},{"segmentId":"2","cabin":"ECONOMY","fareBasis":"HLF2XEX","brandedFare":"FX","class":"H","includedCheckedBags":{"weight":30,"weightUnit":"KG"}},{"segmentId":"5","cabin":"ECONOMY","fareBasis":"HLF2XEX","brandedFare":"FX","class":"H","includedCheckedBags":{"weight":30,"weightUnit":"KG"}},{"segmentId":"6","cabin":"ECONOMY","fareBasis":"HLF2XEX","brandedFare":"FX","class":"H","includedCheckedBags":{"weight":30,"weightUnit":"KG"}}]}]}],"dictionaries":{"locations":{"MAD":{"cityCode":"MAD","countryCode":"ES"},"TPE":{"cityCode":"TPE","countryCode":"TW"},"IST":{"cityCode":"IST","countryCode":"TR"}},"aircraft":{"321":"AIRBUS
        A321","333":"AIRBUS A330-300","77W":"BOEING 777-300ER"},"currencies":{"USD":"US
        DOLLAR"},"carriers":{"TK":"TURKISH AIRLINES"}}}'
  recorded_at: Sat, 22 Oct 2022 06:30:14 GMT
- request:
    method: post
    uri: https://test.api.amadeus.com/v1/security/oauth2/token
    body:
      encoding: UTF-8
      string: grant_type=client_credentials&client_id=BAD_TOKEN&client_secret=BAD_SECRET
    headers:
      Accept:
      - application/x-www-form-urlencoded
      Connection:
      - close
      Content-Type:
      - application/x-www-form-urlencoded
      Host:
      - test.api.amadeus.com
      User-Agent:
      - http.rb/5.1.0
  response:
    status:
      code: 401
      message: Unauthorized
    headers:
      Date:
      - Sat, 22 Oct 2022 06:30:16 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '255'
      Connection:
      - close
      Ama-Gateway-Request-Id:
      - rrt-0160a27b14faae615-a-de-28702-110518548-1
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Allow-Headers:
      - origin, x-requested-with, accept, Content-Type
      Access-Control-Max-Age:
      - '3628800'
      Access-Control-Allow-Methods:
      - POST, GET, OPTIONS
      Server:
      - Amadeus
    body:
      encoding: UTF-8
      string: "\n                {\n                    \"error\":\"invalid_client\",\n
        \                   \"error_description\": \"Client credentials are invalid\",\n
        \                   \"code\": 38187,\n                    \"title\": \"Invalid
        parameters\"\n                }\n            "
  recorded_at: Sat, 22 Oct 2022 06:30:15 GMT
- request:
    method: post
    uri: https://test.api.amadeus.com/v2/shopping/flight-offers
    body:
      encoding: UTF-8
      string: '{"currencyCode":"USD","originDestinations":[{"id":1,"originLocationCode":"AIRPORT_NOT_EXIST","destinationLocationCode":"AIRPORT_NOT_EXIST","departureDateTimeRange":{"date":"2022-11-01","time":"10:00:00"}},{"id":2,"originLocationCode":"AIRPORT_NOT_EXIST","destinationLocationCode":"AIRPORT_NOT_EXIST","departureDateTimeRange":{"date":"2022-11-05","time":"17:00:00"}}],"travelers":[{"id":"1","travelerType":"ADULT"}],"sources":["GDS"]}'
    headers:
      Accept:
      - application/vnd.amadeus+json
      Authorization:
      - 'Bearer '
      Connection:
      - close
      Content-Type:
      - application/json; charset=UTF-8
      Host:
      - test.api.amadeus.com
      User-Agent:
      - http.rb/5.1.0
  response:
    status:
      code: 401
      message: Unauthorized
    headers:
      Date:
      - Sat, 22 Oct 2022 06:30:17 GMT
      Content-Type:
      - application/vnd.amadeus+json
      Content-Length:
      - '382'
      Connection:
      - close
      Www-Authenticate:
      - 'Bearer realm="null",error="invalid_token",error_description="oauth.v2.InvalidAccessToken:
        Invalid access token"'
      Ama-Gateway-Request-Id:
      - rrt-0160a27b14faae615-a-de-28701-110518592-1
      Access-Control-Allow-Headers:
      - origin, x-requested-with, accept, Content-Type, Authorization
      Access-Control-Max-Age:
      - '3628800'
      Access-Control-Allow-Methods:
      - "*"
      Server:
      - Amadeus
      Access-Control-Allow-Origin:
      - "*"
    body:
      encoding: ASCII-8BIT
      string: "\n            {\n                \"errors\": [\n                        {\n
        \                           \"code\": 38191,\n                            \"title\":
        \"Invalid HTTP header\",\n                            \"detail\": \"Missing
        or invalid format for mandatory Authorization header\",\n                            \"status\":
        401\n                        }\n                ]\n            }\n        "
  recorded_at: Sat, 22 Oct 2022 06:30:16 GMT
- request:
    method: post
    uri: https://test.api.amadeus.com/v2/shopping/flight-offers
    body:
      encoding: UTF-8
      string: '{"currencyCode":"USD","originDestinations":[{"id":1,"originLocationCode":"TPE","destinationLocationCode":"MAD","departureDateTimeRange":{"date":"2022-11-01","time":"10:00:00"}},{"id":2,"originLocationCode":"MAD","destinationLocationCode":"TPE","departureDateTimeRange":{"date":"2022-11-05","time":"17:00:00"}}],"travelers":[{"id":"1","travelerType":"ADULT"}],"sources":["GDS"]}'
    headers:
      Accept:
      - application/vnd.amadeus+json
      Authorization:
      - 'Bearer '
      Connection:
      - close
      Content-Type:
      - application/json; charset=UTF-8
      Host:
      - test.api.amadeus.com
      User-Agent:
      - http.rb/5.1.0
  response:
    status:
      code: 401
      message: Unauthorized
    headers:
      Date:
      - Sat, 22 Oct 2022 06:30:18 GMT
      Content-Type:
      - application/vnd.amadeus+json
      Content-Length:
      - '382'
      Connection:
      - close
      Www-Authenticate:
      - 'Bearer realm="null",error="invalid_token",error_description="oauth.v2.InvalidAccessToken:
        Invalid access token"'
      Ama-Gateway-Request-Id:
      - rrt-0160a27b14faae615-a-de-28701-110518630-1
      Access-Control-Allow-Headers:
      - origin, x-requested-with, accept, Content-Type, Authorization
      Access-Control-Max-Age:
      - '3628800'
      Access-Control-Allow-Methods:
      - "*"
      Server:
      - Amadeus
      Access-Control-Allow-Origin:
      - "*"
    body:
      encoding: ASCII-8BIT
      string: "\n            {\n                \"errors\": [\n                        {\n
        \                           \"code\": 38191,\n                            \"title\":
        \"Invalid HTTP header\",\n                            \"detail\": \"Missing
        or invalid format for mandatory Authorization header\",\n                            \"status\":
        401\n                        }\n                ]\n            }\n        "
  recorded_at: Sat, 22 Oct 2022 06:30:17 GMT
recorded_with: VCR 6.1.0
